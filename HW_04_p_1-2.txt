-- a) Назва схеми — “LibraryManagement”

DROP SCHEMA   IF EXISTS  LibraryManagement; 

CREATE SCHEMA LibraryManagement;
USE LibraryManagement;

-- b) Таблиця "authors":
-- 	author_id (INT, автоматично зростаючий PRIMARY KEY)
-- 	author_name (VARCHAR)

CREATE TABLE authors (
	author_id INT AUTO_INCREMENT PRIMARY KEY, 
	author_name VARCHAR(100));

-- c) Таблиця "genres":
-- 	genre_id (INT, автоматично зростаючий PRIMARY KEY)
-- 	genre_name (VARCHAR)

CREATE TABLE genres (
	genre_id INT AUTO_INCREMENT PRIMARY KEY, 
	genre_name VARCHAR(50));

-- d) Таблиця "books":
-- 	book_id (INT, автоматично зростаючий PRIMARY KEY)
-- 	title (VARCHAR)
-- 	publication_year (YEAR)
-- 	author_id (INT, FOREIGN KEY зв'язок з "Authors")
-- 	genre_id (INT, FOREIGN KEY зв'язок з "Genres")

CREATE TABLE books (
	book_id INT AUTO_INCREMENT PRIMARY KEY, 
	title VARCHAR(255),
	publication_year YEAR,
	author_id INT,
	genre_id INT,
	FOREIGN KEY (author_id) REFERENCES authors(author_id),
	FOREIGN KEY (genre_id) REFERENCES genres(genre_id));

-- e) Таблиця "users":
-- 	user_id (INT, автоматично зростаючий PRIMARY KEY)
-- 	username (VARCHAR)
-- 	email (VARCHAR)

CREATE TABLE users (
	user_id INT AUTO_INCREMENT PRIMARY KEY, 
	username VARCHAR(100),
	email VARCHAR(100));

-- f) Таблиця "borrowed_books":
-- 	borrow_id (INT, автоматично зростаючий PRIMARY KEY)
-- 	book_id (INT, FOREIGN KEY зв'язок з "Books")
-- 	user_id (INT, FOREIGN KEY зв'язок з "Users")
-- 	borrow_date (DATE)
-- 	return_date (DATE)

CREATE TABLE borrowed_books (
	borrow_id INT AUTO_INCREMENT PRIMARY KEY,  
	book_id INT,
	user_id INT,
	FOREIGN KEY (book_id) REFERENCES books(book_id),
	FOREIGN KEY (user_id) REFERENCES users(user_id),
	borrow_date DATE,
	return_date DATE);


-- 2. Заповніть таблиці простими видуманими тестовими даними. Достатньо одного-двох рядків у кожну таблицю.

INSERT INTO authors
	(author_name)
VALUES 
	("Sir Arthur Conan Doyle"),
	("Margaret Mitchell"),
	("Louisa May Alcott"),
	("Paulo Coelho");

INSERT INTO genres
	(genre_name)
VALUES 
	("Mystery"),
	("Historical"),
	("Coming of Age");

INSERT INTO books
	(title, publication_year, author_id, genre_id)
VALUES 
	("Sherlock Holmes", 1987 , 1, 1),
	("Gone With The Wind", 1936 , 2, 2),
	("Little Women", 1968, 3, 3),
	("The Alchemist", 1988, 4, 3);

INSERT INTO users
	(username, email)
VALUES 
	("Alexander Heinz", "alexanderhein@gmail.com"),
	("Stephen Rivers", "rivers123@gmail.com"),
	("Charlotte Lee", "leecharlotte@inbox.com");

INSERT INTO borrowed_books
	(book_id, user_id, borrow_date, return_date)
VALUES 
	(1, 2, "2023-12-01", "2024-05-01"),
	(3, 3, "2023-12-10", "2024-05-10"),
	(2, 3, "2024-03-05", "2024-08-05");




